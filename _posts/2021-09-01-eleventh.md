---
title: "Process vs Thread"
layout: single
categories:
  - Blog
tags:
  - process
  - thread
  - program
  - processor
  - pcb
---

## [ Process vs Thread ]

> 용어정리

- 프로그램(Program)
    - 어떤 작업을 위해 운영체제 위에서 **실행할 수 있는 파일**
    - 예를 들어 웹 브라우저, 워드 프로세스, 카카오특 등
- 프로세스(Process)
    - 운영 체제 위에서 **실행중인** 프로그램
    - 프로그램 명령어와 데이터들이 메모리에 올라오고 실행 중 또는 실행 대기중인 상태
- 프로세서(Processor)
    - 프로세스가 **동작**될 수 있도록 하는 하드웨어(=cpu)

        *동작: 프로그램의 자원들이 메모리에 올라오고, 실행되어야 할 코드의 메모리 주소를 CPU의 레지스터로 올리는 것

> 멀티태스킹의 진실

CPU(프로세서)는 **한순간에 하나의 프로세스**만 실행할 수 있음

"운영체제가 짧은 시간에 수십번에서 수천번 실행할 프로세스를 **교체**하고 있기 때문에, 우리는 동시에 여러 개의 작업이 실행되고 있다고 느끼는 것!"

> PCB(Process Control Block)

프로세스를 제어하기 위한 정보 모음

- 프로세스 식별자 (Process ID)
- 프로세스 상태
- 다음에 실행할 명령어의 주소
- 이전에 작업하던 작업 내용(레지스터)
- CPU 스케줄링 정보(우선 순위, 최종 실행시각, CPU 점유시간 등)
- 프로세스의 주소 공간 등

> Context Switching

작업이 교체될 때 필요한 시간

> 프로세스 구조

- Stack: 호출된 함수, 지역변수 등 임시 데이터
- Heap: 동적으로 생긴 데이터 예) new Object(),malloc()
- Data: 전역변수 예) static 변수, global 변수
- Code: 프로그램의 코드

> 멀티 프로세스

작업에 흐름이 여러 갈래 생기는 경우, 여러 개의 프로세스로 하나의 작업을 구성

> 멀티 프로세스 단점 1

각 프로세스가 메모리 영역(Stack, Heap, Data, Code)을 따로 가지고 있기 때문에, 프로세스 1에서 프로세스 2로 교체할 때 다시 메모리 영역을 코어에 올려야 하는 비효율 발생

> 멀티 프로세스 단점2

다른 프로세스의 정보를 이용하기 위해서 통신이 필요

***"이러한 단점들을 보와하기 위해 스레드 탄생!!!"***

> 스레드

**Code, Data, Heap 영역 공유**

> 멀티 프로세스 vs 멀티 스레드

**멀티 스레드가 멀티 프로세스 보다 Context Switching 비용이 적음**

> 멀티 스레드 주의점

- 디버깅이 까다로움
- 한 프로세스안의 스레드에 문제가 생기면 같은 프로세스 안의 스레드도 같이 문제가 생김
- 같은 데이터를 공유하기에, 데이터 동기화에 신경 써야함

### 정리

- 스레드: 프로세스 내에서 실행되는 작업 흐름의 단위
- 프로세스
    - 프로세서에 의해 동작하고 있는 프로그램
    - 프로세스가 동작 한다는 것은 프로세스의 특정 스레드가 실행 중

        그  특정 스레드는 프로세스가 가진 데이터를 참조함

    - 스레드 단위 작업을 지원하기 위한 자원 할당의 단위
- 요약

    **"자원은 Process 단위로 받고 작업/스케줄링은 Thread 단위로 진행함"**
